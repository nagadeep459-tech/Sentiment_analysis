<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Sentiment Analyzer | Professional Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ============================================
           GLOBAL STYLES & RESET
           ============================================ */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #e50914 0%, #b20710 100%);
            --secondary-gradient: linear-gradient(135deg, #e50914 0%, #000000 100%);
            --positive-gradient: linear-gradient(135deg, #e50914 0%, #b20710 100%);
            --negative-gradient: linear-gradient(135deg, #e50914 0%, #8b0000 100%);
            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
            --card-shadow-hover: 0 20px 50px rgba(229, 9, 20, 0.3);
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --text-light: #999999;
            --bg-white: #141414;
            --bg-light: #000000;
            --netflix-red: #e50914;
            --netflix-black: #000000;
            --netflix-dark: #141414;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: var(--text-primary);
            background: var(--netflix-black);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ============================================
           NAVIGATION BAR
           ============================================ */

        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 15px 0;
            box-shadow: 0 2px 20px rgba(229, 9, 20, 0.3);
            border-bottom: 1px solid rgba(229, 9, 20, 0.2);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--netflix-red);
        }

        .brand-icon {
            font-size: 1.8rem;
            filter: drop-shadow(0 2px 4px rgba(106, 17, 203, 0.3));
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 30px;
            background: linear-gradient(135deg, #e50914 0%, #000000 60%);
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
        }

        .nav-link {
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            position: relative;
            transition: all 0.3s ease;
            padding: 5px 0;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--netflix-red);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }

        .nav-link:hover {
            color: var(--netflix-red);
        }

        /* ============================================
           HERO SECTION
           ============================================ */

        .hero-section {
            position: relative;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #000000 0%, #1a0000 50%, #000000 100%);
            overflow: hidden;
            margin-top: 60px;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                url('https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=800') center/cover;
            background-size: cover;
            background-position: center;
            opacity: 0.15;
            filter: blur(2px);
            animation: backgroundShift 20s infinite;
        }

        @keyframes backgroundShift {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.3) 0%, rgba(0, 0, 0, 0.8) 100%);
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            padding: 0 20px;
        }

        .hero-title {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 1s ease;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            font-weight: 300;
            margin-bottom: 40px;
            opacity: 0.95;
            animation: fadeInUp 1s ease 0.2s both;
        }

        .hero-scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            animation: bounce 2s infinite;
        }

        .hero-scroll-indicator span {
            display: block;
            font-size: 0.9rem;
            margin-bottom: 10px;
            opacity: 0.8;
        }

        .scroll-arrow {
            font-size: 2rem;
            opacity: 0.7;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        /* ============================================
           MOVIES SECTION
           ============================================ */

        .movies-section {
            padding: 80px 0;
            background: var(--netflix-black);
        }

        .movies-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }

        .movies-search-container {
            flex: 1 1 220px;
            max-width: 420px;
        }

        .movies-search-input {
            width: 100%;
            padding: 12px 16px;
            border-radius: 999px;
            border: 2px solid rgba(229, 9, 20, 0.3);
            background: var(--netflix-dark);
            color: #ffffff;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            font-family: inherit;
            font-size: 0.95rem;
            outline: none;
            transition: all 0.25s ease;
        }

        .movies-search-input::placeholder {
            color: var(--text-light);
        }

        .movies-search-input:focus {
            border-color: var(--netflix-red);
            box-shadow: 0 10px 28px rgba(229, 9, 20, 0.4);
            background: var(--netflix-dark);
        }

        .movies-sort-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .movies-sort-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .movies-sort-select {
            padding: 10px 14px;
            border-radius: 999px;
            border: 2px solid rgba(229, 9, 20, 0.3);
            background: var(--netflix-dark);
            color: #ffffff;
            font-family: inherit;
            font-size: 0.9rem;
            cursor: pointer;
            outline: none;
            transition: all 0.2s ease;
        }

        .movies-sort-select:hover,
        .movies-sort-select:focus {
            border-color: var(--netflix-red);
            box-shadow: 0 8px 22px rgba(229, 9, 20, 0.3);
        }

        .genre-chips-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .genre-chip {
            padding: 8px 16px;
            border-radius: 999px;
            border: 1px solid rgba(229, 9, 20, 0.3);
            background: var(--netflix-dark);
            color: #ffffff;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .genre-chip:hover {
            background: rgba(229, 9, 20, 0.2);
            transform: translateY(-1px);
        }

        .genre-chip.active {
            background: var(--netflix-red);
            color: #fff;
            border-color: transparent;
            box-shadow: 0 6px 18px rgba(229, 9, 20, 0.5);
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 15px;
            color: var(--netflix-red);
        }

        .section-subtitle {
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 50px;
        }

        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .movie-card {
            background: var(--netflix-dark);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid rgba(229, 9, 20, 0.2);
        }

        .movie-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.2) 0%, rgba(0, 0, 0, 0.8) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .movie-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 20px 50px rgba(229, 9, 20, 0.4);
            border-color: var(--netflix-red);
        }

        .movie-card:hover::before {
            opacity: 1;
        }

        .movie-poster {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
            transition: transform 0.3s ease;
        }

        .movie-card:hover .movie-poster {
            transform: scale(1.1);
        }

        .movie-info {
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .movie-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .movie-year {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .movie-meta-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 6px;
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .movie-rating {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            color: #f59e0b;
        }

        .movie-badges {
            position: absolute;
            top: 12px;
            left: 12px;
            display: flex;
            flex-direction: column;
            gap: 6px;
            z-index: 3;
        }

        .movie-badge {
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 0.7rem;
            font-weight: 600;
            color: #fff;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
        }

        .movie-badge-hot {
            background: linear-gradient(135deg, #f97316, #ea580c);
        }

        .movie-badge-new {
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }

        .movie-card-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(15, 23, 42, 0.1) 0%, rgba(15, 23, 42, 0.9) 100%);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 18px;
            color: #fff;
            z-index: 4;
        }

        .movie-card:hover .movie-card-overlay {
            opacity: 1;
            visibility: visible;
        }

        .movie-overlay-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .movie-overlay-meta {
            font-size: 0.8rem;
            opacity: 0.85;
            margin-bottom: 10px;
        }

        .movie-overlay-description {
            font-size: 0.8rem;
            line-height: 1.5;
            opacity: 0.9;
            max-height: 3.2em;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 12px;
        }

        .movie-rating-bar {
            position: relative;
            height: 6px;
            border-radius: 999px;
            background: rgba(148, 163, 184, 0.4);
            overflow: hidden;
            margin-bottom: 10px;
        }

        .movie-rating-bar-fill {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            width: 0;
            border-radius: inherit;
            background: linear-gradient(90deg, #22c55e, #facc15);
            transition: width 0.3s ease;
        }

        .movie-card:hover .movie-rating-bar-fill {
            width: var(--rating-fill, 70%);
        }

        .movie-overlay-actions {
            display: flex;
            justify-content: flex-end;
        }

        .movie-overlay-button {
            padding: 8px 14px;
            border-radius: 999px;
            border: none;
            background: var(--primary-gradient);
            color: #fff;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 8px 20px rgba(15, 23, 42, 0.65);
            transition: all 0.2s ease;
        }

        .movie-overlay-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 26px rgba(15, 23, 42, 0.8);
        }

        .movie-review {
            display: none;
        }

        /* ============================================
           ANALYZER SECTION
           ============================================ */

        .analyzer-section {
            padding: 80px 0;
            background: var(--netflix-black);
        }

        .analyzer-card {
            max-width: 800px;
            margin: 0 auto;
            background: var(--netflix-dark);
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(229, 9, 20, 0.2);
        }

        .analyzer-input-group {
            margin-bottom: 30px;
        }

        .input-label {
            display: block;
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .review-textarea {
            width: 100%;
            padding: 20px;
            border: 2px solid rgba(229, 9, 20, 0.3);
            border-radius: 15px;
            font-family: inherit;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.3s ease;
            background: var(--netflix-dark);
            color: #ffffff;
        }

        .review-textarea:focus {
            outline: none;
            border-color: var(--netflix-red);
            box-shadow: 0 0 0 4px rgba(229, 9, 20, 0.2);
            background: var(--netflix-dark);
        }

        .predict-button {
            width: 100%;
            padding: 18px 30px;
            background: var(--netflix-red);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(229, 9, 20, 0.5);
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .predict-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(229, 9, 20, 0.6);
            background: #b20710;
        }

        .predict-button:active:not(:disabled) {
            transform: translateY(0);
        }

        .predict-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .button-loader {
            display: none;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-left: 10px;
        }

        .button-loader.active {
            display: inline-block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .result-container {
            display: none;
            margin-top: 30px;
        }

        .result-container.active {
            display: block;
            animation: fadeInScale 0.5s ease;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .result-box {
            padding: 30px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: var(--card-shadow);
        }

        .result-box.positive {
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.9) 0%, rgba(178, 7, 16, 0.9) 100%);
            color: white;
            border: 1px solid rgba(229, 9, 20, 0.5);
        }

        .result-box.negative {
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.9) 100%);
            color: white;
            border: 1px solid rgba(229, 9, 20, 0.3);
        }

        .result-icon {
            font-size: 3rem;
            line-height: 1;
        }

        .result-content {
            flex: 1;
        }

        .result-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .result-confidence {
            font-size: 1rem;
            margin-top: 6px;
            opacity: 0.9;
        }

        .error-box {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: rgba(229, 9, 20, 0.2);
            border: 2px solid var(--netflix-red);
            border-radius: 12px;
            color: #ff6b6b;
            text-align: center;
            font-weight: 500;
        }

        .error-box.active {
            display: block;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* ============================================
           ABOUT SECTION
           ============================================ */

        .about-section {
            padding: 80px 0;
            background: var(--netflix-black);
        }

        .about-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .about-text {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 40px;
        }

        .about-features {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .feature-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 20px;
            background: var(--bg-white);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .feature-item:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2.5rem;
        }

        .feature-text {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* ============================================
           FOOTER
           ============================================ */

        .footer {
            position: relative;
            background: #1a1a1a;
            color: white;
            padding: 60px 0 30px;
            text-align: center;
        }

        .footer-gradient {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .footer-social {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .social-icon {
            font-size: 1.5rem;
            text-decoration: none;
            transition: transform 0.3s ease;
            display: inline-block;
        }

        .social-icon:hover {
            transform: scale(1.2) rotate(5deg);
        }

        .footer-copy {
            font-size: 0.9rem;
            color: #999;
            margin-top: 20px;
        }

        /* ============================================
           RESPONSIVE DESIGN
           ============================================ */

        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.2rem;
            }

            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }

            .movie-poster {
                height: 220px;
            }

            .analyzer-card {
                padding: 25px;
            }

            .section-title {
                font-size: 2rem;
            }

            .nav-menu {
                gap: 15px;
            }

            .nav-link {
                font-size: 0.9rem;
            }

            .about-features {
                gap: 20px;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }

            .movies-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .analyzer-card {
                padding: 20px;
            }
        }

        /* ============================================
           MOVIE MODAL STYLES
           ============================================ */

        .movie-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            overflow-y: auto;
        }

        .movie-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .movie-modal-container {
            background: linear-gradient(135deg, #000000 0%, #1a0000 50%, #000000 100%);
            border-radius: 20px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 30px 80px rgba(229, 9, 20, 0.4);
            position: relative;
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(229, 9, 20, 0.3);
        }

        .movie-modal-overlay.active .movie-modal-container {
            transform: scale(1) translateY(0);
        }

        .movie-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .movie-modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .movie-modal-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
            padding: 40px;
        }

        .movie-modal-header {
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }

        .movie-modal-poster {
            width: 250px;
            height: 375px;
            border-radius: 15px;
            object-fit: cover;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            flex-shrink: 0;
        }

        .movie-modal-info {
            flex: 1;
            color: #fff;
        }

        .movie-modal-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--netflix-red);
        }

        .movie-modal-meta {
            display: flex;
            gap: 20px;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .movie-modal-year {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
        }

        .movie-modal-genres {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .movie-modal-genre-tag {
            padding: 6px 14px;
            background: rgba(229, 9, 20, 0.3);
            border: 1px solid rgba(229, 9, 20, 0.5);
            border-radius: 20px;
            font-size: 0.85rem;
            color: #fff;
            font-weight: 500;
        }

        .movie-modal-description {
            font-size: 1.1rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
        }

        .movie-modal-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .movie-modal-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .movie-modal-btn-primary {
            background: var(--netflix-red);
            color: white;
            box-shadow: 0 4px 15px rgba(229, 9, 20, 0.5);
        }

        .movie-modal-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(229, 9, 20, 0.6);
            background: #b20710;
        }

        .movie-modal-btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .movie-modal-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .movie-modal-header {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .movie-modal-poster {
                width: 200px;
                height: 300px;
            }

            .movie-modal-title {
                font-size: 2rem;
            }

            .movie-modal-content {
                padding: 30px 20px;
            }

            .movie-modal-actions {
                flex-direction: column;
            }

            .movie-modal-btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .movie-modal-container {
                max-height: 95vh;
                border-radius: 15px;
            }

            .movie-modal-poster {
                width: 150px;
                height: 225px;
            }

            .movie-modal-title {
                font-size: 1.5rem;
            }

            .movie-modal-content {
                padding: 20px 15px;
                gap: 20px;
            }
        }

        /* ============================================
           STAR RATING STYLES
           ============================================ */

        .movie-modal-rating-section {
            margin: 25px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .rating-label {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 12px;
            font-weight: 500;
        }

        .star-rating-container {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 10px;
        }

        .star-rating-container .star {
            font-size: 2.5rem;
            color: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
            line-height: 1;
            display: inline-block;
        }

        .star-rating-container .star:hover {
            transform: scale(1.2);
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
        }

        .star-rating-container .star.active {
            color: #ffd700;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
            transform: scale(1.1);
        }

        .star-rating-container .star.active:hover {
            transform: scale(1.3);
        }

        .rating-display {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            margin-top: 8px;
        }

        .rating-display.has-rating {
            color: #ffd700;
        }

        /* Suggested Rating (Read-only) */
        .suggested-rating-container {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            text-align: center;
        }

        .suggested-rating-label {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 12px;
            font-weight: 600;
        }

        .suggested-rating-stars {
            display: flex;
            justify-content: center;
            gap: 6px;
            margin-bottom: 8px;
        }

        .suggested-rating-stars .star {
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.4);
            line-height: 1;
        }

        .suggested-rating-stars .star.filled {
            color: #ffd700;
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
        }

        .suggested-rating-text {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .star-rating-container .star {
                font-size: 2rem;
            }

            .suggested-rating-stars .star {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .movie-modal-rating-section {
                padding: 15px;
            }

            .star-rating-container .star {
                font-size: 1.8rem;
            }

            .suggested-rating-stars .star {
                font-size: 1.3rem;
            }
        }

        /* ============================================
           ANALYTICS DASHBOARD STYLES
           ============================================ */

        .analytics-section {
            padding: 80px 0;
            background: var(--netflix-black);
            min-height: 80vh;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-top: 40px;
        }

        .analytics-card {
            background: var(--netflix-dark);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(229, 9, 20, 0.2);
        }

        .analytics-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--netflix-red);
        }

        .analytics-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--card-shadow-hover);
        }

        .analytics-card-full {
            grid-column: 1 / -1;
        }

        .analytics-card-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(229, 9, 20, 0.2);
        }

        .analytics-card-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--netflix-red);
        }

        .analytics-card-subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
            width: 100%;
            padding: 10px;
        }

        .analytics-card-full .chart-wrapper {
            height: 350px;
        }

        @media (max-width: 968px) {
            .analytics-grid {
                grid-template-columns: 1fr;
            }

            .analytics-card-full {
                grid-column: 1;
            }
        }

        @media (max-width: 768px) {
            .analytics-section {
                padding: 60px 0;
            }

            .analytics-card {
                padding: 20px;
            }

            .chart-wrapper {
                height: 250px;
            }

            .analytics-card-full .chart-wrapper {
                height: 280px;
            }
        }

        @media (max-width: 480px) {
            .analytics-card {
                padding: 15px;
            }

            .chart-wrapper {
                height: 200px;
            }

            .analytics-card-full .chart-wrapper {
                height: 220px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="brand-icon">üé¨</span>
                <span class="brand-text">Sentiment Analyzer</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#home" class="nav-link active">Home</a></li>
                <li><a href="#analyze" class="nav-link">Analyze</a></li>
                <li><a href="#analytics" class="nav-link">üìä Analytics</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title">Movie Sentiment Analyzer</h1>
            <p class="hero-subtitle">Choose a movie or enter your own review</p>
            <div class="hero-scroll-indicator">
                <span>Scroll to explore</span>
                <div class="scroll-arrow">‚Üì</div>
            </div>
        </div>
    </section>

    <!-- Movie Cards Grid -->
    <section class="movies-section">
        <div class="container">
            <h2 class="section-title">Featured Movies</h2>
            <p class="section-subtitle">Explore trending movies, filter by genre, and analyze detailed reviews</p>

            <!-- Movies Toolbar -->
            <div class="movies-toolbar">
                <div class="movies-search-container">
                    <input 
                        id="movieSearchInput" 
                        type="text" 
                        class="movies-search-input" 
                        placeholder="Search by title, genre, year..."
                        autocomplete="off"
                    />
                </div>
                <div class="movies-sort-container">
                    <label for="movieSortSelect" class="movies-sort-label">Sort by</label>
                    <select id="movieSortSelect" class="movies-sort-select">
                        <option value="trending">Trending</option>
                        <option value="ratingHigh">Rating: High ‚Üí Low</option>
                        <option value="ratingLow">Rating: Low ‚Üí High</option>
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                    </select>
                </div>
            </div>

            <!-- Genre Filter Chips -->
            <div class="genre-chips-row" id="genreChipsRow">
                <button class="genre-chip active" data-genre="All">All</button>
                <button class="genre-chip" data-genre="Action">Action</button>
                <button class="genre-chip" data-genre="Drama">Drama</button>
                <button class="genre-chip" data-genre="Thriller">Thriller</button>
                <button class="genre-chip" data-genre="Sci-Fi">Sci-Fi</button>
                <button class="genre-chip" data-genre="Comedy">Comedy</button>
                <button class="genre-chip" data-genre="Horror">Horror</button>
                <button class="genre-chip" data-genre="Romance">Romance</button>
            </div>

            <div class="movies-grid" id="moviesGrid">
                <!-- Movie cards will be generated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Review Analyzer Section -->
    <section id="analyze" class="analyzer-section">
        <div class="container">
            <h2 class="section-title">Analyze Any Review</h2>
            <p class="section-subtitle">Enter your movie review below or select a movie above</p>
            
            <div class="analyzer-card">
                <div class="analyzer-input-group">
                    <label for="reviewInput" class="input-label">Your Review</label>
                    <textarea 
                        id="reviewInput" 
                        class="review-textarea"
                        placeholder="Type your movie review here or click a movie card above to load a sample review..."
                        rows="8"
                    ></textarea>
                </div>

                <button id="predictBtn" class="predict-button">
                    <span class="button-text">Predict Sentiment</span>
                    <span class="button-loader" id="buttonLoader"></span>
                </button>

                <div class="result-container" id="resultContainer">
                    <div class="result-box" id="resultBox">
                        <div class="result-icon" id="resultIcon"></div>
                        <div class="result-content">
                            <div class="result-label">Sentiment</div>
                            <div class="result-value" id="resultValue"></div>
                            <div class="result-confidence" id="resultConfidence"></div>
                        </div>
                    </div>
                    
                    <!-- Suggested Rating Based on Sentiment -->
                    <div class="suggested-rating-container" id="suggestedRatingContainer" style="display: none;">
                        <div class="suggested-rating-label">‚≠ê Suggested Rating Based on Sentiment</div>
                        <div class="suggested-rating-stars" id="suggestedRatingStars"></div>
                        <div class="suggested-rating-text" id="suggestedRatingText"></div>
                    </div>
                </div>

                <div class="error-box" id="errorBox"></div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about-section">
        <div class="container">
            <h2 class="section-title">About This Tool</h2>
            <div class="about-content">
                <p class="about-text">
                    The Movie Sentiment Analyzer uses advanced machine learning algorithms powered by Spark ML 
                    to analyze the sentiment of movie reviews. Simply enter a review or select from our curated 
                    collection of movie reviews to get instant sentiment analysis.
                </p>
                <div class="about-features">
                    <div class="feature-item">
                        <span class="feature-icon">ü§ñ</span>
                        <span class="feature-text">ML-Powered Analysis</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">‚ö°</span>
                        <span class="feature-text">Real-Time Results</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üéØ</span>
                        <span class="feature-text">High Accuracy</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Analytics Dashboard Section -->
    <section id="analytics" class="analytics-section">
        <div class="container">
            <h2 class="section-title">üìä Analytics Dashboard</h2>
            <p class="section-subtitle">Track sentiment predictions and model performance in real-time</p>
            
            <div class="analytics-grid">
                <!-- Sentiment Distribution Pie Chart -->
                <div class="analytics-card">
                    <div class="analytics-card-header">
                        <h3 class="analytics-card-title">Sentiment Distribution</h3>
                        <p class="analytics-card-subtitle">Positive vs Negative vs Neutral</p>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="sentimentPieChart"></canvas>
                    </div>
                </div>

                <!-- Confidence Trend Line Chart -->
                <div class="analytics-card">
                    <div class="analytics-card-header">
                        <h3 class="analytics-card-title">Confidence Trend</h3>
                        <p class="analytics-card-subtitle">Model confidence over time</p>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="confidenceLineChart"></canvas>
                    </div>
                </div>

                <!-- Top Words Bar Chart -->
                <div class="analytics-card analytics-card-full">
                    <div class="analytics-card-header">
                        <h3 class="analytics-card-title">Top Positive vs Negative Words</h3>
                        <p class="analytics-card-subtitle">Most common words in reviews</p>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="wordsBarChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-gradient"></div>
        <div class="footer-content">
            <p class="footer-text">Powered by Spark ML + Java</p>
            <div class="footer-social">
                <a href="https://www.instagram.com" target="_blank" class="social-icon" aria-label="Instagram">üì∏</a>
                <a href="https://www.twitter.com" target="_blank" class="social-icon" aria-label="Twitter">üê¶</a>
                <a href="mailto:contact@example.com" class="social-icon" aria-label="Email">‚úâÔ∏è</a>
            </div>
            <p class="footer-copy">&copy; 2025 Movie Sentiment Analyzer. All rights reserved.</p>
        </div>
    </footer>

    <!-- Movie Modal -->
    <div id="movieModal" class="movie-modal-overlay">
        <div class="movie-modal-container">
            <button class="movie-modal-close" id="movieModalClose" aria-label="Close modal">√ó</button>
            <div class="movie-modal-content">
                <div class="movie-modal-header">
                    <img id="modalPoster" src="" alt="Movie poster" class="movie-modal-poster">
                    <div class="movie-modal-info">
                        <h2 id="modalTitle" class="movie-modal-title"></h2>
                        <div class="movie-modal-meta">
                            <span id="modalYear" class="movie-modal-year"></span>
                            <div id="modalGenres" class="movie-modal-genres"></div>
                        </div>
                        <p id="modalDescription" class="movie-modal-description"></p>
                        
                        <!-- Star Rating Control -->
                        <div class="movie-modal-rating-section">
                            <div class="rating-label">Rate this movie:</div>
                            <div class="star-rating-container" id="modalStarRating">
                                <span class="star" data-value="1">‚òÜ</span>
                                <span class="star" data-value="2">‚òÜ</span>
                                <span class="star" data-value="3">‚òÜ</span>
                                <span class="star" data-value="4">‚òÜ</span>
                                <span class="star" data-value="5">‚òÜ</span>
                            </div>
                            <div class="rating-display" id="modalRatingDisplay">Not rated</div>
                        </div>
                        
                        <div class="movie-modal-actions">
                            <button id="modalAnalyzeBtn" class="movie-modal-btn movie-modal-btn-primary">
                                üîç Analyze the Review
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ReviewBot Chatbot Assets (Embedded) -->
    <style>
        /* ReviewBot Chatbot Widget - Premium Professional UI */

        /* ============================================
           LAUNCHER BUTTON
           ============================================ */

        #reviewbot-launcher {
          position: fixed;
          right: 24px;
          bottom: 24px;
          width: 64px;
          height: 64px;
          border-radius: 50%;
          background: linear-gradient(135deg, #6a11cb, #2575fc);
          box-shadow: 0 8px 24px rgba(106, 17, 203, 0.4),
                      0 0 0 0 rgba(106, 17, 203, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          color: #fff;
          font-size: 28px;
          cursor: pointer;
          z-index: 1200;
          border: none;
          outline: none;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          animation: rb-launcher-glow 2s ease-in-out infinite;
        }

        #reviewbot-launcher:hover {
          transform: translateY(-4px) scale(1.05);
          box-shadow: 0 12px 32px rgba(106, 17, 203, 0.5),
                      0 0 0 8px rgba(106, 17, 203, 0.1);
        }

        #reviewbot-launcher:active {
          transform: translateY(-2px) scale(0.98);
        }

        #reviewbot-launcher-icon {
          pointer-events: none;
          transition: transform 0.2s ease;
        }

        #reviewbot-launcher:hover #reviewbot-launcher-icon {
          transform: scale(1.1);
        }

        @keyframes rb-launcher-glow {
          0%, 100% {
            box-shadow: 0 8px 24px rgba(106, 17, 203, 0.4),
                        0 0 0 0 rgba(106, 17, 203, 0.5);
          }
          50% {
            box-shadow: 0 8px 24px rgba(106, 17, 203, 0.5),
                        0 0 0 4px rgba(106, 17, 203, 0.2);
          }
        }

        /* ============================================
           CHAT CONTAINER
           ============================================ */

        #reviewbot-chat {
          position: fixed;
          right: 24px;
          bottom: 96px;
          width: 380px;
          max-width: calc(100vw - 32px);
          height: 520px;
          max-height: calc(100vh - 120px);
          border-radius: 24px;
          background: rgba(15, 18, 35, 0.95);
          backdrop-filter: blur(20px) saturate(180%);
          -webkit-backdrop-filter: blur(20px) saturate(180%);
          box-shadow: 0 32px 80px rgba(0, 0, 0, 0.7),
                      0 0 0 1px rgba(255, 255, 255, 0.05);
          display: flex;
          flex-direction: column;
          overflow: hidden;
          opacity: 0;
          visibility: hidden;
          transform: translateY(24px) scale(0.94);
          transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
          z-index: 1199;
        }

        #reviewbot-chat.rb-open {
          opacity: 1;
          visibility: visible;
          transform: translateY(0) scale(1);
        }

        #reviewbot-chat.rb-fullscreen {
          right: 0;
          bottom: 0;
          width: 100vw;
          height: 100vh;
          max-width: 100vw;
          max-height: 100vh;
          border-radius: 0;
          bottom: 0;
        }

        /* ============================================
           CHAT HEADER
           ============================================ */

        .rb-chat-header {
          padding: 16px 20px;
          background: linear-gradient(135deg, rgba(106, 17, 203, 0.95), rgba(37, 117, 252, 0.95));
          color: #fff;
          display: flex;
          align-items: center;
          justify-content: space-between;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
          position: relative;
          z-index: 10;
        }

        .rb-chat-header-left {
          display: flex;
          align-items: center;
          gap: 12px;
          flex: 1;
        }

        .rb-chat-avatar {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background: rgba(255, 255, 255, 0.15);
          backdrop-filter: blur(10px);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 20px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
          flex-shrink: 0;
        }

        .rb-chat-header-text {
          flex: 1;
          min-width: 0;
        }

        .rb-chat-title {
          font-size: 16px;
          font-weight: 700;
          margin-bottom: 2px;
          line-height: 1.2;
        }

        .rb-chat-subtitle {
          font-size: 11px;
          opacity: 0.9;
          line-height: 1.2;
        }

        .rb-chat-header-actions {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .rb-chat-close,
        .rb-chat-fullscreen {
          background: rgba(255, 255, 255, 0.15);
          border: none;
          color: rgba(255, 255, 255, 0.95);
          cursor: pointer;
          font-size: 20px;
          width: 32px;
          height: 32px;
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease;
          flex-shrink: 0;
        }

        .rb-chat-close:hover,
        .rb-chat-fullscreen:hover {
          background: rgba(255, 255, 255, 0.25);
          transform: scale(1.1);
        }

        .rb-chat-close:active,
        .rb-chat-fullscreen:active {
          transform: scale(0.95);
        }

        /* ============================================
           CHAT BODY (MESSAGES)
           ============================================ */

        .rb-chat-body {
          flex: 1;
          padding: 16px 12px;
          display: flex;
          flex-direction: column;
          gap: 12px;
          overflow-y: auto;
          overflow-x: hidden;
          scroll-behavior: smooth;
        }

        .rb-chat-body::-webkit-scrollbar {
          width: 6px;
        }

        .rb-chat-body::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 3px;
        }

        .rb-chat-body::-webkit-scrollbar-thumb {
          background: rgba(255, 255, 255, 0.2);
          border-radius: 3px;
        }

        .rb-chat-body::-webkit-scrollbar-thumb:hover {
          background: rgba(255, 255, 255, 0.3);
        }

        .rb-message-row {
          display: flex;
          flex-direction: column;
          margin: 4px 0;
          animation: rb-message-slide-in 0.3s ease-out;
        }

        .rb-message-row.user {
          align-items: flex-end;
        }

        .rb-message-row.bot {
          align-items: flex-start;
        }

        @keyframes rb-message-slide-in {
          from {
            opacity: 0;
            transform: translateY(8px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .rb-message {
          max-width: 75%;
          padding: 12px 16px;
          border-radius: 18px;
          font-size: 14px;
          line-height: 1.5;
          word-wrap: break-word;
          white-space: pre-wrap;
          position: relative;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .rb-message.user {
          background: linear-gradient(135deg, #6a11cb, #2575fc);
          color: #fff;
          border-bottom-right-radius: 4px;
          box-shadow: 0 4px 12px rgba(106, 17, 203, 0.3);
        }

        .rb-message.bot {
          background: rgba(255, 255, 255, 0.12);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          color: #f5f5f5;
          border-bottom-left-radius: 4px;
          border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .rb-message-time {
          font-size: 10px;
          opacity: 0.6;
          margin-top: 4px;
          padding: 0 4px;
          font-weight: 500;
        }

        .rb-message-row.user .rb-message-time {
          text-align: right;
        }

        .rb-message-row.bot .rb-message-time {
          text-align: left;
        }

        /* ============================================
           TYPING INDICATOR
           ============================================ */

        .rb-typing {
          display: none;
          padding: 8px 16px 12px;
          opacity: 0;
          transform: translateY(-8px);
          transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .rb-typing.rb-visible {
          display: flex;
          align-items: center;
          gap: 8px;
          opacity: 1;
          transform: translateY(0);
        }

        .rb-typing-text {
          font-size: 12px;
          color: rgba(255, 255, 255, 0.7);
          font-style: italic;
        }

        .rb-dots {
          display: flex;
          gap: 4px;
          align-items: center;
        }

        .rb-dots span {
          display: inline-block;
          width: 6px;
          height: 6px;
          border-radius: 50%;
          background: rgba(255, 255, 255, 0.6);
          animation: rb-bounce 1.4s infinite ease-in-out;
        }

        .rb-dots span:nth-child(1) {
          animation-delay: 0s;
        }

        .rb-dots span:nth-child(2) {
          animation-delay: 0.2s;
        }

        .rb-dots span:nth-child(3) {
          animation-delay: 0.4s;
        }

        @keyframes rb-bounce {
          0%, 80%, 100% {
            transform: translateY(0);
            opacity: 0.5;
          }
          40% {
            transform: translateY(-6px);
            opacity: 1;
          }
        }

        /* ============================================
           QUICK REPLY BUTTONS
           ============================================ */

        .rb-quick-replies {
          display: none;
          flex-wrap: wrap;
          gap: 8px;
          padding: 12px 16px;
          border-top: 1px solid rgba(255, 255, 255, 0.08);
          background: rgba(10, 12, 25, 0.5);
          animation: rb-quick-replies-slide 0.3s ease-out;
        }

        @keyframes rb-quick-replies-slide {
          from {
            opacity: 0;
            transform: translateY(-8px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .rb-quick-reply-btn {
          padding: 6px 12px;
          border-radius: 16px;
          border: 1px solid rgba(255, 255, 255, 0.15);
          background: rgba(255, 255, 255, 0.08);
          color: rgba(255, 255, 255, 0.9);
          font-size: 11px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s ease;
          white-space: nowrap;
          backdrop-filter: blur(10px);
        }

        .rb-quick-reply-btn:hover {
          background: rgba(106, 17, 203, 0.3);
          border-color: rgba(106, 17, 203, 0.5);
          transform: translateY(-1px);
          box-shadow: 0 4px 8px rgba(106, 17, 203, 0.2);
        }

        .rb-quick-reply-btn:active {
          transform: translateY(0);
        }

        /* ============================================
           CHAT FOOTER (INPUT AREA)
           ============================================ */

        .rb-chat-footer {
          padding: 12px 16px 16px;
          border-top: 1px solid rgba(255, 255, 255, 0.08);
          background: rgba(10, 12, 25, 0.96);
          display: flex;
          align-items: flex-end;
          gap: 10px;
        }

        #reviewbot-input {
          flex: 1;
          border-radius: 20px;
          border: 2px solid rgba(255, 255, 255, 0.12);
          background: rgba(15, 18, 35, 0.9);
          color: #f5f5f5;
          padding: 10px 16px;
          font-size: 14px;
          font-family: inherit;
          line-height: 1.5;
          resize: none;
          outline: none;
          transition: all 0.2s ease;
          min-height: 44px;
          max-height: 120px;
          box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #reviewbot-input::placeholder {
          color: rgba(255, 255, 255, 0.4);
        }

        #reviewbot-input:focus {
          border-color: rgba(106, 17, 203, 0.6);
          background: rgba(15, 18, 35, 1);
          box-shadow: 0 0 0 3px rgba(106, 17, 203, 0.1),
                      inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #reviewbot-send {
          width: 44px;
          height: 44px;
          border-radius: 50%;
          border: none;
          padding: 0;
          background: linear-gradient(135deg, #6a11cb, #2575fc);
          color: #fff;
          font-size: 18px;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease;
          flex-shrink: 0;
          box-shadow: 0 4px 12px rgba(106, 17, 203, 0.3);
        }

        #reviewbot-send:hover {
          transform: translateY(-2px) scale(1.05);
          box-shadow: 0 6px 16px rgba(106, 17, 203, 0.4);
        }

        #reviewbot-send:active {
          transform: translateY(0) scale(0.98);
        }

        #reviewbot-send:disabled {
          opacity: 0.5;
          cursor: not-allowed;
          transform: none;
        }

        /* ============================================
           RESPONSIVE DESIGN
           ============================================ */

        @media (max-width: 480px) {
          #reviewbot-chat {
            right: 12px;
            left: 12px;
            width: auto;
            bottom: 86px;
            height: calc(100vh - 100px);
          }

          #reviewbot-launcher {
            right: 16px;
            bottom: 16px;
            width: 56px;
            height: 56px;
            font-size: 24px;
          }

          .rb-chat-header {
            padding: 12px 16px;
          }

          .rb-chat-avatar {
            width: 36px;
            height: 36px;
            font-size: 18px;
          }

          .rb-chat-title {
            font-size: 14px;
          }

          .rb-chat-subtitle {
            font-size: 10px;
          }

          .rb-message {
            max-width: 85%;
            font-size: 13px;
            padding: 10px 14px;
          }

          .rb-quick-replies {
            padding: 10px 12px;
          }

          .rb-quick-reply-btn {
            font-size: 10px;
            padding: 5px 10px;
          }
        }

        /* Fullscreen mode adjustments */
        #reviewbot-chat.rb-fullscreen .rb-chat-body {
          padding: 20px;
        }

        #reviewbot-chat.rb-fullscreen .rb-message {
          max-width: 60%;
        }

        #reviewbot-chat.rb-fullscreen .rb-quick-replies {
          padding: 16px 20px;
        }

        #reviewbot-chat.rb-fullscreen .rb-chat-footer {
          padding: 16px 20px 20px;
        }
    </style>
    <script>
        // ReviewBot Chatbot Widget - Premium Professional UI

        (function () {
          'use strict';

          // Backend API used everywhere else in the app
          const API_URL = 'http://localhost:8080/predict';

          // Chat history storage (last 30 messages)
          const CHAT_HISTORY_KEY = 'reviewbot_chat_history';
          const MAX_HISTORY = 30;

          // Hold DOM references safely
          const dom = {
            launcher: null,
            chat: null,
            close: null,
            fullscreen: null,
            messages: null,
            input: null,
            send: null,
            typing: null,
            quickReplies: null
          };

          // Chat state
          let chatHistory = [];
          let isFullscreen = false;

          function createElements() {
            // Avoid creating twice
            if (document.getElementById('reviewbot-launcher')) {
              return;
            }

            // Launcher button with improved styling
            const launcher = document.createElement('button');
            launcher.id = 'reviewbot-launcher';
            launcher.type = 'button';
            launcher.className = 'rb-launcher';
            launcher.innerHTML = '<span id="reviewbot-launcher-icon">üí¨</span>';

            // Chat container with full-screen support
            const chat = document.createElement('div');
            chat.id = 'reviewbot-chat';
            chat.innerHTML =
              '<div class="rb-chat-header">' +
                '<div class="rb-chat-header-left">' +
                  '<div class="rb-chat-avatar">üé¨</div>' +
                  '<div class="rb-chat-header-text">' +
                    '<div class="rb-chat-title">ReviewBot üé¨</div>' +
                    '<div class="rb-chat-subtitle">AI-Powered Sentiment Analysis</div>' +
                  '</div>' +
                '</div>' +
                '<div class="rb-chat-header-actions">' +
                  '<button class="rb-chat-fullscreen" type="button" aria-label="Toggle Fullscreen" title="Toggle Fullscreen">‚õ∂</button>' +
                  '<button class="rb-chat-close" type="button" aria-label="Close" title="Close">√ó</button>' +
                '</div>' +
              '</div>' +
              '<div class="rb-chat-body" id="reviewbot-messages"></div>' +
              '<div class="rb-typing" id="reviewbot-typing">' +
                '<div class="rb-typing-text">ReviewBot is typing</div>' +
                '<div class="rb-dots"><span></span><span></span><span></span></div>' +
              '</div>' +
              '<div class="rb-quick-replies" id="reviewbot-quick-replies">' +
                '<button class="rb-quick-reply-btn" data-command="predict">üîç Analyze this review</button>' +
                '<button class="rb-quick-reply-btn" data-command="summarize">üìù Summarize this</button>' +
                '<button class="rb-quick-reply-btn" data-command="rewrite">‚úèÔ∏è Rewrite this</button>' +
                '<button class="rb-quick-reply-btn" data-command="explain">üß† Explain sentiment</button>' +
              '</div>' +
              '<div class="rb-chat-footer">' +
                '<textarea id="reviewbot-input" placeholder="Write or paste a movie review..." autocomplete="off" rows="1"></textarea>' +
                '<button id="reviewbot-send" type="button" title="Send message">‚û§</button>' +
              '</div>';

            document.body.appendChild(launcher);
            document.body.appendChild(chat);

            dom.launcher = launcher;
            dom.chat = chat;
            dom.close = chat.querySelector('.rb-chat-close');
            dom.fullscreen = chat.querySelector('.rb-chat-fullscreen');
            dom.messages = document.getElementById('reviewbot-messages');
            dom.typing = document.getElementById('reviewbot-typing');
            dom.input = document.getElementById('reviewbot-input');
            dom.send = document.getElementById('reviewbot-send');
            dom.quickReplies = document.getElementById('reviewbot-quick-replies');

            bindEvents();
            loadChatHistory();
            
            // Show welcome message if no history
            if (chatHistory.length === 0) {
              addBotMessage('Hi, I am ReviewBot üé¨. Paste a movie review and I will tell you if it is positive or negative.');
            }
          }

          function bindEvents() {
            // Launcher click
            if (dom.launcher) {
              dom.launcher.addEventListener('click', function(e) {
                e.preventDefault();
                toggleChat();
                // Pop animation
                dom.launcher.style.transform = 'scale(0.9)';
                setTimeout(() => {
                  dom.launcher.style.transform = '';
                }, 150);
              });
            }

            // Close button
            if (dom.close) {
              dom.close.addEventListener('click', toggleChat);
            }

            // Fullscreen toggle
            if (dom.fullscreen) {
              dom.fullscreen.addEventListener('click', toggleFullscreen);
            }

            // Send button
            if (dom.send) {
              dom.send.addEventListener('click', onSendClicked);
            }

            // Input handling
            if (dom.input) {
              // Auto-resize textarea
              dom.input.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
              });

              // Enter to send (Shift+Enter for new line)
              dom.input.addEventListener('keydown', function (e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                  e.preventDefault();
                  onSendClicked();
                }
              });

              // Focus input when chat opens
              dom.input.addEventListener('focus', function() {
                if (dom.chat && dom.chat.classList.contains('rb-open')) {
                  dom.quickReplies.style.display = 'flex';
                }
              });
            }

            // Quick reply buttons
            if (dom.quickReplies) {
              const buttons = dom.quickReplies.querySelectorAll('.rb-quick-reply-btn');
              buttons.forEach(btn => {
                btn.addEventListener('click', function() {
                  const command = this.getAttribute('data-command');
                  // Map command names
                  const actionMap = {
                    'predict': 'analyze',
                    'summarize': 'summarize',
                    'rewrite': 'rewrite',
                    'explain': 'explain'
                  };
                  const action = actionMap[command] || command;
                  onQuickAction(action);
                });
              });
            }
          }

          function toggleChat() {
            if (!dom.chat) return;
            const isOpen = dom.chat.classList.toggle('rb-open');
            
            if (isOpen) {
              // Show quick replies when opening
              if (dom.quickReplies) {
                dom.quickReplies.style.display = 'flex';
              }
              // Focus input
              if (dom.input) {
                setTimeout(() => dom.input.focus(), 100);
              }
            } else {
              // Hide quick replies when closing
              if (dom.quickReplies) {
                dom.quickReplies.style.display = 'none';
              }
            }
          }

          function toggleFullscreen() {
            if (!dom.chat) return;
            isFullscreen = !isFullscreen;
            dom.chat.classList.toggle('rb-fullscreen', isFullscreen);
            
            // Update fullscreen button icon
            if (dom.fullscreen) {
              dom.fullscreen.textContent = isFullscreen ? '‚õ∂' : '‚õ∂';
              dom.fullscreen.title = isFullscreen ? 'Exit Fullscreen' : 'Toggle Fullscreen';
            }
          }

          // Get current input text safely
          function getCurrentInputText() {
            if (!dom.input) return '';
            return (dom.input.value || '').trim();
          }

          // Main handler for quick action buttons
          function onQuickAction(action) {
            try {
              const inputText = getCurrentInputText();
              
              // Check if input is empty
              if (!inputText) {
                addBotMessage('Please enter a review first.');
                if (dom.input) {
                  dom.input.focus();
                }
                return;
              }

              // Route to appropriate handler based on action
              switch (action) {
                case 'analyze':
                  if (typeof handleReviewSentiment === 'function') {
                    handleReviewSentiment(inputText);
                  } else {
                    addBotMessage('Error: Analysis function not available.');
                  }
                  break;
                case 'summarize':
                  if (typeof handleSummarize === 'function') {
                    handleSummarize(inputText);
                  } else {
                    addBotMessage('Error: Summarize function not available.');
                  }
                  break;
                case 'rewrite':
                  if (typeof handleRewrite === 'function') {
                    handleRewrite(inputText);
                  } else {
                    addBotMessage('Error: Rewrite function not available.');
                  }
                  break;
                case 'explain':
                  if (typeof handleExplainSentiment === 'function') {
                    handleExplainSentiment(inputText);
                  } else {
                    addBotMessage('Error: Explain function not available.');
                  }
                  break;
                default:
                  addBotMessage('Unknown action. Please try again.');
              }
            } catch (err) {
              console.error('Error in onQuickAction:', err);
              addBotMessage('An error occurred. Please try again.');
            }
          }

          // Handler for sentiment analysis (calls backend)
          async function handleReviewSentiment(text) {
            if (!text || !text.trim()) {
              addBotMessage('Please enter a review to analyze.');
              return;
            }

            // Clear input field
            if (dom.input) {
              dom.input.value = '';
              dom.input.style.height = 'auto';
            }

            // Add user message showing what we're analyzing
            addUserMessage(text);
            
            // Call backend for sentiment analysis
            if (!dom.send) return;
            setTyping(true);
            dom.send.disabled = true;

            try {
              const response = await fetch(API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: text })
              });

              if (!response.ok) {
                throw new Error('Server error: ' + response.status);
              }

              const data = await response.json();
              const sentimentRaw = (data.sentiment || '').toString().toLowerCase();
              const prediction = data.prediction;

              let label = 'Neutral üòê';
              if (sentimentRaw === 'positive' || prediction === 1 || prediction === '1') {
                label = 'Positive üòä';
              } else if (sentimentRaw === 'negative' || prediction === 0 || prediction === '0') {
                label = 'Negative üòû';
              }

              addBotMessage('Predicted sentiment: ' + label);
            } catch (err) {
              console.error('ReviewBot error:', err);
              addBotMessage('I could not reach the sentiment service. Please make sure the Java backend is running on http://localhost:8080 and then try again.');
            } finally {
              setTyping(false);
              dom.send.disabled = false;
            }
          }

          // Handler for summarize action
          function handleSummarize(text) {
            // Clear input field
            if (dom.input) {
              dom.input.value = '';
              dom.input.style.height = 'auto';
            }

            const fullMessage = 'Summarize this: ' + text;
            addUserMessage(fullMessage);
            // For now, send a placeholder response (can be enhanced later)
            setTimeout(() => {
              addBotMessage('Summary feature coming soon! For now, I can analyze the sentiment of your review.');
            }, 500);
          }

          // Handler for rewrite action
          function handleRewrite(text) {
            // Clear input field
            if (dom.input) {
              dom.input.value = '';
              dom.input.style.height = 'auto';
            }

            const fullMessage = 'Rewrite this: ' + text;
            addUserMessage(fullMessage);
            // For now, send a placeholder response (can be enhanced later)
            setTimeout(() => {
              addBotMessage('Rewrite feature coming soon! For now, I can analyze the sentiment of your review.');
            }, 500);
          }

          // Handler for explain sentiment action
          function handleExplainSentiment(text) {
            // Clear input field
            if (dom.input) {
              dom.input.value = '';
              dom.input.style.height = 'auto';
            }

            const fullMessage = 'Explain sentiment: ' + text;
            addUserMessage(fullMessage);
            // For now, send a placeholder response (can be enhanced later)
            setTimeout(() => {
              addBotMessage('Sentiment explanation feature coming soon! For now, I can analyze the sentiment of your review.');
            }, 500);
          }

          function formatTime() {
            const now = new Date();
            return now.toLocaleTimeString('en-US', { 
              hour: 'numeric', 
              minute: '2-digit',
              hour12: true 
            });
          }

          function addMessage(sender, text, timestamp) {
            if (!dom.messages) return;
            
            const row = document.createElement('div');
            row.className = 'rb-message-row ' + (sender === 'user' ? 'user' : 'bot');

            const bubble = document.createElement('div');
            bubble.className = 'rb-message ' + (sender === 'user' ? 'user' : 'bot');
            bubble.textContent = text;

            // Add timestamp
            const time = document.createElement('div');
            time.className = 'rb-message-time';
            time.textContent = timestamp || formatTime();

            row.appendChild(bubble);
            row.appendChild(time);
            dom.messages.appendChild(row);
            
            // Smooth scroll to bottom
            setTimeout(() => {
              dom.messages.scrollTop = dom.messages.scrollHeight;
            }, 50);

            // Save to history
            saveMessageToHistory(sender, text, timestamp || formatTime());
          }

          function addBotMessage(text) {
            addMessage('bot', text);
          }

          function addUserMessage(text) {
            addMessage('user', text);
          }

          function setTyping(isTyping) {
            if (!dom.typing) return;
            if (isTyping) {
              dom.typing.classList.add('rb-visible');
            } else {
              dom.typing.classList.remove('rb-visible');
            }
          }

          function onSendClicked() {
            if (!dom.input || !dom.send) return;
            const text = dom.input.value.trim();
            if (!text) {
              return;
            }
            
            dom.input.value = '';
            dom.input.style.height = 'auto';
            addUserMessage(text);
            predictSentiment(text);
          }

          async function predictSentiment(text) {
            if (!dom.send) return;
            setTyping(true);
            dom.send.disabled = true;

            try {
              const response = await fetch(API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: text })
              });

              if (!response.ok) {
                throw new Error('Server error: ' + response.status);
              }

              const data = await response.json();
              const sentimentRaw = (data.sentiment || '').toString().toLowerCase();
              const prediction = data.prediction;

              let label = 'Neutral üòê';
              if (sentimentRaw === 'positive' || prediction === 1 || prediction === '1') {
                label = 'Positive üòä';
              } else if (sentimentRaw === 'negative' || prediction === 0 || prediction === '0') {
                label = 'Negative üòû';
              }

              addBotMessage('Predicted sentiment: ' + label);
            } catch (err) {
              console.error('ReviewBot error:', err);
              addBotMessage('I could not reach the sentiment service. Please make sure the Java backend is running on http://localhost:8080 and then try again.');
            } finally {
              setTyping(false);
              dom.send.disabled = false;
            }
          }

          // LocalStorage functions
          function saveMessageToHistory(sender, text, timestamp) {
            chatHistory.push({ sender, text, timestamp });
            
            // Keep only last MAX_HISTORY messages
            if (chatHistory.length > MAX_HISTORY) {
              chatHistory = chatHistory.slice(-MAX_HISTORY);
            }
            
            try {
              localStorage.setItem(CHAT_HISTORY_KEY, JSON.stringify(chatHistory));
            } catch (e) {
              console.warn('Could not save chat history:', e);
            }
          }

          function loadChatHistory() {
            try {
              const stored = localStorage.getItem(CHAT_HISTORY_KEY);
              if (stored) {
                chatHistory = JSON.parse(stored);
                // Render all messages
                chatHistory.forEach(msg => {
                  const row = document.createElement('div');
                  row.className = 'rb-message-row ' + (msg.sender === 'user' ? 'user' : 'bot');

                  const bubble = document.createElement('div');
                  bubble.className = 'rb-message ' + (msg.sender === 'user' ? 'user' : 'bot');
                  bubble.textContent = msg.text;

                  const time = document.createElement('div');
                  time.className = 'rb-message-time';
                  time.textContent = msg.timestamp || '';

                  row.appendChild(bubble);
                  row.appendChild(time);
                  if (dom.messages) {
                    dom.messages.appendChild(row);
                  }
                });
                
                // Scroll to bottom
                if (dom.messages) {
                  setTimeout(() => {
                    dom.messages.scrollTop = dom.messages.scrollHeight;
                  }, 100);
                }
              }
            } catch (e) {
              console.warn('Could not load chat history:', e);
              chatHistory = [];
            }
          }

          // Initialize when DOM is ready
          if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', createElements);
          } else {
            createElements();
          }
        })();
    </script>

    <script>
        // ============================================
        // MOVIE DATA - Static movie cards with reviews
        // ============================================

        // Updated movie reviews (richer, more descriptive text)
        const moviesData = [
            {
                title: "The Dark Knight",
                year: "2008",
                poster: "https://images.unsplash.com/photo-1534809027769-b00d750a6bac?w=400&h=600&fit=crop",
                review: "This movie is absolutely amazing and outstanding! The acting was brilliant and excellent, especially Heath Ledger's wonderful performance as the Joker. The plot was engaging and great, and I was on the edge of my seat the entire time. The cinematography and direction are outstanding and flawless. This is a brilliant masterpiece that everyone should watch!",
                genres: ["Action", "Drama", "Thriller"],
                description: "A gritty, grounded superhero crime saga that redefined comic book films with unforgettable performances and tension. Batman faces his greatest challenge in the form of the Joker, a criminal mastermind who seeks to create chaos."
            },
            {
                title: "Inception",
                year: "2010",
                poster: "https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=600&fit=crop",
                review: "This is an amazing and outstanding film that is absolutely brilliant! The cinematography is excellent and breathtaking, the soundtrack is wonderful and perfect, and the emotional depth is great and incredible. Christopher Nolan has created an outstanding masterpiece that is brilliant and challenges the mind while touching the heart.",
                genres: ["Sci-Fi", "Thriller", "Action"],
                description: "Reality-bending heists inside dreams, layered with emotional stakes and a thunderous Hans Zimmer score. A mind-bending journey through layers of consciousness where the rules of reality no longer apply."
            },
            {
                title: "Pulp Fiction",
                year: "1994",
                poster: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400&h=600&fit=crop",
                review: "I loved every minute of this movie! The characters are well-developed, the dialogue is witty and memorable, and the non-linear storytelling is brilliant. The ending was perfect. Can't wait to watch it again!",
                genres: ["Crime", "Drama", "Thriller"],
                description: "A stylish, nonlinear crime tapestry packed with razor-sharp dialogue and unforgettable characters. Quentin Tarantino's masterpiece weaves together multiple interconnected stories in Los Angeles's criminal underworld."
            },
            {
                title: "The Shawshank Redemption",
                year: "1994",
                poster: "https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=600&fit=crop",
                review: "This is an amazing and outstanding film with brilliant performances by the entire cast! The story is excellent and compelling, and the direction is wonderful and flawless. This is outstanding cinema at its finest! A brilliant and timeless classic that is absolutely great and everyone should watch.",
                genres: ["Drama", "Crime"],
                description: "A powerful, hopeful prison drama about friendship, perseverance, and freedom. Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency."
            },
            {
                title: "Interstellar",
                year: "2014",
                poster: "https://images.unsplash.com/photo-1534809027769-b00d750a6bac?w=400&h=600&fit=crop",
                review: "A visually stunning masterpiece with incredible emotional depth. The scientific accuracy combined with human drama creates an unforgettable experience. The score by Hans Zimmer is phenomenal.",
                genres: ["Sci-Fi", "Drama", "Adventure"],
                description: "A sweeping space odyssey about love, time, and survival across the stars. A team of explorers travel through a wormhole in space in an attempt to ensure humanity's survival."
            },
            {
                title: "The Matrix",
                year: "1999",
                poster: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400&h=600&fit=crop",
                review: "Revolutionary filmmaking that changed cinema forever. The visual effects are groundbreaking, the philosophy is thought-provoking, and the action sequences are mind-blowing. A true sci-fi classic!",
                genres: ["Sci-Fi", "Action", "Thriller"],
                description: "Reality is a simulation in this genre-defining cyberpunk action film. A computer hacker learns about the true nature of reality and his role in the war against its controllers."
            },
            {
                title: "Fight Club",
                year: "1999",
                poster: "https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=600&fit=crop",
                review: "This film is absolutely terrible and awful! The plot is boring and makes no sense, the acting is terrible and wooden, and I completely wasted two hours of my life. The violence is gratuitous and disgusting, and the message is confusing and pointless. This is one of the worst movies I've ever seen. Do not watch this terrible movie!",
                genres: ["Drama", "Thriller"],
                description: "A brutal, provocative satire of consumer culture and masculinity. An insomniac office worker and a devil-may-care soapmaker form an underground fight club that evolves into something much bigger."
            },
            {
                title: "Batman v Superman",
                year: "2016",
                poster: "https://images.unsplash.com/photo-1534809027769-b00d750a6bac?w=400&h=600&fit=crop",
                review: "I was extremely disappointed and frustrated with this terrible movie! The movie is boring and awful, poorly written and confusing, and the special effects look cheap and terrible. The plot is convoluted and messy, and the characters are underdeveloped and boring. This is a waste of time and money. Save your money and time - this is one of the worst superhero movies ever made!",
                genres: ["Action", "Superhero", "Drama"],
                description: "A visually striking but narratively messy clash of titans. Fearing the actions of a god-like super hero left unchecked, Gotham City's own vigilante takes on Metropolis's most revered hero."
            },
            {
                title: "The Last Airbender",
                year: "2010",
                poster: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400&h=600&fit=crop",
                review: "What a terrible and awful waste of time! The characters are unlikeable and boring, the story is predictable and disappointing, and the dialogue is cringe-worthy and terrible. The adaptation completely misses the spirit of the original and is poorly executed. This is one of the worst adaptations I've ever seen. I completely regret watching this terrible movie!",
                genres: ["Fantasy", "Adventure", "Action"],
                description: "An infamous live-action adaptation that struggles to capture the heart and humor of its beloved source. The story follows Aang, a young boy who must master all four elements to save the world."
            },
            {
                title: "Catwoman",
                year: "2004",
                poster: "https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=600&fit=crop",
                review: "This is absolutely one of the worst and most terrible movies I've ever seen! Nothing works at all - not the terrible script, not the awful acting, not the poor direction. The action scenes are boring and poorly choreographed, and the plot is confusing and nonsensical. This is completely awful and disappointing. A complete waste of time and money - do not watch this terrible film!",
                genres: ["Action", "Superhero", "Crime"],
                description: "A notorious superhero misfire known more for its camp than its crime-fighting. A shy woman transforms into a cat-like superhero after being resurrected by Egyptian cats."
            },
            {
                title: "Parasite",
                year: "2019",
                poster: "https://images.unsplash.com/photo-1534809027769-b00d750a6bac?w=400&h=600&fit=crop",
                review: "Brilliant filmmaking from start to finish! The social commentary is sharp, the performances are outstanding, and the plot twists are masterfully executed. A perfect blend of thriller and dark comedy.",
                genres: ["Thriller", "Drama", "Comedy"],
                description: "A darkly comic thriller that slices into class, privilege, and survival with surgical precision. A poor family schemes to become employed by a wealthy family by infiltrating their household."
            },
            {
                title: "Spirited Away",
                year: "2001",
                poster: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400&h=600&fit=crop",
                review: "This is an amazing and outstanding animated masterpiece that is absolutely brilliant! The artistry is excellent and stunning, the story is wonderful and enchanting, and the characters are great and unforgettable. This is a brilliant and outstanding work from Studio Ghibli at its absolute best!",
                genres: ["Animation", "Fantasy", "Adventure"],
                description: "A breathtaking journey through a spirit world full of wonder, detail, and emotional warmth. A young girl must work in a mysterious spirit world to free her parents who have been turned into pigs."
            },
            {
                title: "Mad Max: Fury Road",
                year: "2015",
                poster: "https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=600&fit=crop",
                review: "This is an amazing and outstanding adrenaline-fueled action masterpiece that is absolutely brilliant! The practical effects are excellent and incredible, the cinematography is wonderful and breathtaking, and the world-building is great and immersive. This is an outstanding film with non-stop excitement from beginning to end!",
                genres: ["Action", "Sci-Fi", "Thriller"],
                description: "A relentless, visually explosive chase across the wasteland with practical stunts and bold style. In a post-apocalyptic wasteland, Max teams up with a mysterious woman to escape a tyrannical warlord."
            },
            {
                title: "Get Out",
                year: "2017",
                poster: "https://images.unsplash.com/photo-1534809027769-b00d750a6bac?w=400&h=600&fit=crop",
                review: "Genius horror-thriller with brilliant social commentary. The tension builds perfectly, the performances are excellent, and the twist is shocking. Jordan Peele has created something truly special.",
                genres: ["Horror", "Thriller", "Mystery"],
                description: "A razor-sharp horror thriller that blends scares with incisive commentary on race and identity. A young African-American visits his white girlfriend's parents for the weekend, where his uneasiness about their reception of him eventually reaches a boiling point."
            },
            {
                title: "The Godfather",
                year: "1972",
                poster: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400&h=600&fit=crop",
                review: "This is an amazing and outstanding cinematic masterpiece that is absolutely brilliant! The storytelling is excellent and perfect, the performances are wonderful and legendary, and the direction is great and flawless. This is an outstanding film that is why we go to the movies. This is a brilliant and excellent work of pure perfection!",
                genres: ["Crime", "Drama", "Thriller"],
                description: "A towering epic of power, family, and loyalty that became the gold standard for crime dramas. The aging patriarch of an organized crime dynasty transfers control to his reluctant son."
            },
            {
                title: "Blade Runner 2049",
                year: "2017",
                poster: "https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=600&fit=crop",
                review: "This is an amazing and outstanding film that is visually stunning and emotionally profound! The cinematography is excellent and some of the best ever captured on film. The story is wonderful and thought-provoking, and the performances are great and excellent. This is a brilliant and outstanding worthy sequel that everyone should watch!",
                genres: ["Sci-Fi", "Thriller", "Drama"],
                description: "A hauntingly beautiful sequel that deepens the questions of identity, memory, and humanity. A young blade runner's discovery of a long-buried secret leads him to track down former blade runner Rick Deckard."
            },
            {
                title: "Dunkirk",
                year: "2017",
                poster: "https://images.unsplash.com/photo-1534809027769-b00d750a6bac?w=400&h=600&fit=crop",
                review: "Intense and immersive war film. The non-linear narrative creates incredible tension. The practical effects and cinematography are outstanding. A masterclass in filmmaking.",
                genres: ["War", "Drama", "Thriller"],
                description: "A visceral, time-bending war thriller that drops you directly onto the beaches and in the skies. Allied soldiers from Belgium, the British Empire, and France are surrounded by the German Army."
            },
            {
                title: "Whiplash",
                year: "2014",
                poster: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400&h=600&fit=crop",
                review: "Incredibly intense and emotionally gripping. The performances are outstanding, especially J.K. Simmons. The editing and sound design create an almost unbearable tension. Absolutely brilliant!",
                genres: ["Drama", "Music", "Thriller"],
                description: "An electrifying clash between student and teacher about perfection, obsession, and sacrifice. A promising young drummer enrolls at a cut-throat music conservatory where his dreams of greatness are mentored by an instructor who will stop at nothing to realize a student's potential."
            },
            {
                title: "The Revenant",
                year: "2015",
                poster: "https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=600&fit=crop",
                review: "Visually breathtaking with incredible cinematography. Leonardo DiCaprio's performance is raw and powerful. The survival story is gripping and the natural lighting is stunning. A cinematic achievement.",
                genres: ["Drama", "Adventure", "Thriller"],
                description: "A brutal survival saga in frozen wilderness, captured with natural light and visceral intensity. A frontiersman on a fur trading expedition in the 1820s fights for survival after being mauled by a bear."
            },
            {
                title: "Her",
                year: "2013",
                poster: "https://images.unsplash.com/photo-1534809027769-b00d750a6bac?w=400&h=600&fit=crop",
                review: "This is an amazing and outstanding film that is absolutely brilliant! The futuristic setting is excellent and authentic, and the love story is wonderful and surprisingly touching. The cinematography and score are great and create an outstanding dreamlike atmosphere. This is a brilliant and excellent modern classic that everyone should watch!",
                genres: ["Romance", "Sci-Fi", "Drama"],
                description: "A tender, futuristic romance exploring connection and loneliness in a near-future digital world. A lonely writer develops an unlikely relationship with an operating system designed to meet his every need."
            }
        ];

        // ============================================
        // DOM ELEMENTS
        // ============================================

        const moviesGrid = document.getElementById('moviesGrid');
        const movieSearchInput = document.getElementById('movieSearchInput');
        const genreChipsRow = document.getElementById('genreChipsRow');
        const movieSortSelect = document.getElementById('movieSortSelect');
        const reviewInput = document.getElementById('reviewInput');
        const predictBtn = document.getElementById('predictBtn');
        const buttonLoader = document.getElementById('buttonLoader');
        const resultContainer = document.getElementById('resultContainer');
        const resultBox = document.getElementById('resultBox');
        const resultIcon = document.getElementById('resultIcon');
        const resultValue = document.getElementById('resultValue');
        const resultConfidence = document.getElementById('resultConfidence');
        const errorBox = document.getElementById('errorBox');
        const navLinks = document.querySelectorAll('.nav-link');
        
        // Modal elements
        const movieModal = document.getElementById('movieModal');
        const movieModalClose = document.getElementById('movieModalClose');
        const modalPoster = document.getElementById('modalPoster');
        const modalTitle = document.getElementById('modalTitle');
        const modalYear = document.getElementById('modalYear');
        const modalGenres = document.getElementById('modalGenres');
        const modalDescription = document.getElementById('modalDescription');
        const modalAnalyzeBtn = document.getElementById('modalAnalyzeBtn');
        const modalStarRating = document.getElementById('modalStarRating');
        const modalRatingDisplay = document.getElementById('modalRatingDisplay');
        const suggestedRatingContainer = document.getElementById('suggestedRatingContainer');
        const suggestedRatingStars = document.getElementById('suggestedRatingStars');
        const suggestedRatingText = document.getElementById('suggestedRatingText');
        
        // Current movie in modal
        let currentMovieData = null;
        let currentUserRating = 0;

        // ============================================
        // INITIALIZE MOVIE CARDS & FILTERS
        // ============================================

        // Movie explorer state
        let filteredMovies = [];
        let currentSearchTerm = '';
        let currentGenreFilter = 'All';
        let currentSortOption = 'trending';

        // Enrich movie data with rating and primary genre if missing
        moviesData.forEach((movie) => {
            if (!movie.genres || !Array.isArray(movie.genres) || movie.genres.length === 0) {
                movie.genres = ['Drama'];
            }
            // Primary genre for filters/search
            movie.genre = movie.genre || movie.genres[0];

            // Basic heuristic: negative reviews get lower ratings, others higher
            if (typeof movie.rating !== 'number') {
                const negativePattern = /(terrible|worst|awful|boring|waste|disappointing|regret|bad|poor)/i;
                const isNegative = negativePattern.test(movie.review || '');
                const base = isNegative ? 3 : 7.5;
                const spread = isNegative ? 2 : 1.5;
                const randomOffset = Math.random() * spread;
                movie.rating = Number((base + randomOffset).toFixed(1));
            }
        });

        function initializeMovies() {
            if (!moviesGrid) {
                console.error('Movies grid not found!');
                return;
            }
            
            // Start with all movies
            filteredMovies = [...moviesData];

            initializeFilters();
            filterMovies();
        }

        // Initialize search, genre chips, and sort dropdown
        function initializeFilters() {
            // Search input
            if (movieSearchInput) {
                movieSearchInput.addEventListener('input', () => {
                    currentSearchTerm = movieSearchInput.value.toLowerCase().trim();
                    filterMovies();
                });
            }

            // Genre chips
            if (genreChipsRow) {
                const chips = genreChipsRow.querySelectorAll('.genre-chip');
                chips.forEach((chip) => {
                    chip.addEventListener('click', () => {
                        chips.forEach(c => c.classList.remove('active'));
                        chip.classList.add('active');
                        currentGenreFilter = chip.getAttribute('data-genre') || 'All';
                        filterMovies();
                    });
                });
            }

            // Sort dropdown
            if (movieSortSelect) {
                movieSortSelect.addEventListener('change', () => {
                    currentSortOption = movieSortSelect.value || 'trending';
                    filterMovies();
                });
            }
        }

        // Apply search and genre filters
        function filterMovies() {
            let result = [...moviesData];

            // Genre filter
            if (currentGenreFilter && currentGenreFilter !== 'All') {
                result = result.filter(movie =>
                    movie.genres &&
                    movie.genres.some(g => g.toLowerCase() === currentGenreFilter.toLowerCase())
                );
            }

            // Search filter
            if (currentSearchTerm) {
                result = result.filter(movie => {
                    const term = currentSearchTerm;
                    const fields = [
                        movie.title,
                        movie.year && movie.year.toString(),
                        movie.genre,
                        movie.genres && movie.genres.join(' '),
                        movie.description
                    ].join(' ').toLowerCase();
                    return fields.includes(term);
                });
            }

            filteredMovies = result;
            sortMovies();
            renderMovies();
        }

        // Sort filtered movies based on selection
        function sortMovies() {
            if (!Array.isArray(filteredMovies)) return;

            const movies = filteredMovies;
            switch (currentSortOption) {
                case 'ratingHigh':
                    movies.sort((a, b) => (b.rating || 0) - (a.rating || 0));
                    break;
                case 'ratingLow':
                    movies.sort((a, b) => (a.rating || 0) - (b.rating || 0));
                    break;
                case 'newest':
                    movies.sort((a, b) => Number(b.year) - Number(a.year));
                    break;
                case 'oldest':
                    movies.sort((a, b) => Number(a.year) - Number(b.year));
                    break;
                case 'trending':
                default:
                    // Trending: slightly favor higher-rated and newer movies
                    movies.sort((a, b) => {
                        const scoreA = (a.rating || 0) + (Number(a.year) || 0) / 1000;
                        const scoreB = (b.rating || 0) + (Number(b.year) || 0) / 1000;
                        return scoreB - scoreA;
                    });
                    break;
            }
        }

        // Render movie cards into grid
        function renderMovies() {
            if (!moviesGrid) return;
            moviesGrid.innerHTML = '';
            
            if (!filteredMovies.length) {
                const emptyState = document.createElement('div');
                emptyState.style.textAlign = 'center';
                emptyState.style.color = 'var(--text-secondary)';
                emptyState.style.padding = '40px 0';
                emptyState.textContent = 'No movies match your search. Try a different title, genre, or year.';
                moviesGrid.appendChild(emptyState);
                return;
            }

            filteredMovies.forEach((movie) => {
                const movieCard = document.createElement('div');
                movieCard.className = 'movie-card';
                movieCard.setAttribute('data-review', movie.review);

                // Badges logic
                const isHot = (movie.rating || 0) > 7.5;
                const isNew = Number(movie.year) >= 2020;
                const ratingPercent = Math.max(0, Math.min(100, ((movie.rating || 0) / 10) * 100));
                
                movieCard.innerHTML = `
                    <div class="movie-badges">
                        ${isHot ? '<span class="movie-badge movie-badge-hot">üî• Trending</span>' : ''}
                        ${isNew ? '<span class="movie-badge movie-badge-new">üÜï New</span>' : ''}
                    </div>
                    <img src="${movie.poster}" alt="${movie.title}" class="movie-poster" loading="lazy" onerror="this.src='https://via.placeholder.com/400x600?text=${encodeURIComponent(movie.title)}'">
                    <div class="movie-info">
                        <div class="movie-title">${movie.title}</div>
                        <div class="movie-year">${movie.year}</div>
                        <div class="movie-meta-line">
                            <span>${movie.genre || (movie.genres && movie.genres[0]) || ''}</span>
                            <span class="movie-rating">‚≠ê ${(movie.rating || 0).toFixed(1)}</span>
                    </div>
                    </div>
                    <div class="movie-card-overlay" style="--rating-fill: ${ratingPercent}%">
                        <div class="movie-overlay-title">${movie.title}</div>
                        <div class="movie-overlay-meta">
                            ${movie.genre || (movie.genres && movie.genres[0]) || ''} ‚Ä¢ ${movie.year}
                        </div>
                        <div class="movie-overlay-description">
                            ${(movie.description || movie.review || '').substring(0, 150)}
                        </div>
                        <div class="movie-rating-bar">
                            <div class="movie-rating-bar-fill"></div>
                        </div>
                        <div class="movie-overlay-actions">
                            <button class="movie-overlay-button" type="button">
                                üîç Analyze Review
                            </button>
                        </div>
                    </div>
                `;

                // Open modal on card click
                movieCard.addEventListener('click', (e) => {
                    e.preventDefault();
                    openMovieModal(movie);
                });
                
                moviesGrid.appendChild(movieCard);
            });
        }

        // ============================================
        // MOVIE MODAL FUNCTIONS
        // ============================================

        function openMovieModal(movie) {
            if (!movieModal) return;
            
            currentMovieData = movie;
            currentUserRating = 0; // Reset rating when opening new modal
            
            // Populate modal with movie data
            if (modalPoster) modalPoster.src = movie.poster;
            if (modalPoster) modalPoster.alt = movie.title;
            if (modalTitle) modalTitle.textContent = movie.title;
            if (modalYear) modalYear.textContent = movie.year;
            
            // Set genres
            if (modalGenres) {
                modalGenres.innerHTML = '';
                const genres = movie.genres || ['Drama', 'Action'];
                genres.forEach(genre => {
                    const tag = document.createElement('span');
                    tag.className = 'movie-modal-genre-tag';
                    tag.textContent = genre;
                    modalGenres.appendChild(tag);
                });
            }
            
            // Set description
            if (modalDescription) {
                modalDescription.textContent = movie.description || 'A captivating cinematic experience that will keep you on the edge of your seat.';
            }
            
            // Initialize star rating
            initStarRating();
            
            // Show modal
            movieModal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeMovieModal() {
            if (!movieModal) return;
            movieModal.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
            currentMovieData = null;
        }

        // Modal event listeners
        if (movieModalClose) {
            movieModalClose.addEventListener('click', closeMovieModal);
        }

        // Close modal when clicking outside
        if (movieModal) {
            movieModal.addEventListener('click', (e) => {
                if (e.target === movieModal) {
                    closeMovieModal();
                }
            });
        }

        // Close modal with ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && movieModal && movieModal.classList.contains('active')) {
                closeMovieModal();
            }
        });

        // Modal button handler - fills textarea and scrolls (doesn't auto-analyze)
        if (modalAnalyzeBtn) {
            modalAnalyzeBtn.addEventListener('click', () => {
                if (currentMovieData && currentMovieData.review && reviewInput) {
                    // Fill the textarea with the review
                    reviewInput.value = currentMovieData.review;
                    reviewInput.focus();
                    closeMovieModal();
                    
                    // Scroll to analyzer section
                    const analyzeSection = document.getElementById('analyze');
                    if (analyzeSection) {
                        analyzeSection.scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                    updateActiveNavLink('analyze');
                    // Note: User must click "Predict Sentiment" button to analyze
                }
            });
        }

        // ============================================
        // STAR RATING FUNCTIONS
        // ============================================

        function initStarRating() {
            if (!modalStarRating || !modalRatingDisplay) return;
            
            // Reset stars
            const stars = modalStarRating.querySelectorAll('.star');
            stars.forEach(star => {
                star.classList.remove('active');
                star.textContent = '‚òÜ';
            });
            
            // Reset display
            if (modalRatingDisplay) {
                modalRatingDisplay.textContent = 'Not rated';
                modalRatingDisplay.classList.remove('has-rating');
            }
            
            currentUserRating = 0;
            
            // Attach event listeners
            stars.forEach((star, index) => {
                const value = index + 1;
                
                star.addEventListener('mouseenter', () => {
                    updateStarRatingUI(value, true);
                });
                
                star.addEventListener('mouseleave', () => {
                    updateStarRatingUI(currentUserRating, false);
                });
                
                star.addEventListener('click', () => {
                    currentUserRating = value;
                    updateStarRatingUI(currentUserRating, false);
                });
            });
        }

        function updateStarRatingUI(rating, isHover = false) {
            if (!modalStarRating || !modalRatingDisplay) return;
            
            const stars = modalStarRating.querySelectorAll('.star');
            const displayRating = isHover ? rating : currentUserRating;
            
            stars.forEach((star, index) => {
                const value = index + 1;
                if (value <= displayRating) {
                    star.classList.add('active');
                    star.textContent = '‚òÖ';
                } else {
                    star.classList.remove('active');
                    star.textContent = '‚òÜ';
                }
            });
            
            // Update display text
            if (!isHover && currentUserRating > 0) {
                modalRatingDisplay.textContent = `Rated: ${currentUserRating} / 5 ‚òÖ`;
                modalRatingDisplay.classList.add('has-rating');
            } else if (!isHover) {
                modalRatingDisplay.textContent = 'Not rated';
                modalRatingDisplay.classList.remove('has-rating');
            }
        }

        function showSuggestedRating(isPositive) {
            if (!suggestedRatingContainer || !suggestedRatingStars || !suggestedRatingText) return;
            
            // Calculate suggested rating
            let suggestedRating;
            if (isPositive) {
                suggestedRating = 4.5; // Positive ‚Üí 4.5 stars
            } else {
                suggestedRating = 1.5; // Negative ‚Üí 1.5 stars
            }
            
            // Display stars
            suggestedRatingStars.innerHTML = '';
            for (let i = 1; i <= 5; i++) {
                const star = document.createElement('span');
                star.className = 'star';
                if (i <= Math.floor(suggestedRating)) {
                    star.textContent = '‚òÖ';
                    star.classList.add('filled');
                } else if (i === Math.ceil(suggestedRating) && suggestedRating % 1 !== 0) {
                    star.textContent = '‚òÖ';
                    star.classList.add('filled');
                    star.style.opacity = '0.5'; // Half star
                } else {
                    star.textContent = '‚òÜ';
                }
                suggestedRatingStars.appendChild(star);
            }
            
            // Display text
            suggestedRatingText.textContent = `${suggestedRating.toFixed(1)} / 5.0`;
            
            // Show container
            suggestedRatingContainer.style.display = 'block';
        }

        // ============================================
        // LOAD MOVIE REVIEW INTO TEXTAREA
        // ============================================

        function loadMovieReview(review) {
            if (reviewInput) {
                reviewInput.value = review;
                reviewInput.focus();
            }
            
            // Smooth scroll to analyzer section
            const analyzeSection = document.getElementById('analyze');
            if (analyzeSection) {
                analyzeSection.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }
            
            // Update active nav link
            updateActiveNavLink('analyze');
        }

        // ============================================
        // NAVIGATION HANDLING
        // ============================================

        function updateActiveNavLink(section) {
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${section}`) {
                    link.classList.add('active');
                }
            });
        }

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                
                if (targetSection) {
                    const navHeight = document.querySelector('.navbar')?.offsetHeight || 60;
                    const targetPosition = targetSection.offsetTop - navHeight;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                    
                    updateActiveNavLink(targetId);
                }
            });
        });

        // Handle scroll to update active nav link
        let lastScrollTop = 0;
        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const navHeight = document.querySelector('.navbar')?.offsetHeight || 60;
            
            const sections = ['home', 'analyze', 'analytics', 'about'];
            let currentSection = 'home';
            
            sections.forEach(section => {
                const element = document.getElementById(section);
                if (element) {
                    const elementTop = element.offsetTop - navHeight - 100;
                    if (scrollTop >= elementTop) {
                        currentSection = section;
                    }
                }
            });
            
            updateActiveNavLink(currentSection);
            lastScrollTop = scrollTop;
        });

        // ============================================
        // SENTIMENT ANALYSIS API CALL
        // ============================================

        async function analyzeSentiment(reviewText) {
            try {
                // Show loading state
                if (predictBtn) predictBtn.disabled = true;
                if (buttonLoader) buttonLoader.classList.add('active');
                hideResult();
                hideError();
                
                // Make API request
                const response = await fetch('http://localhost:8080/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: reviewText
                    })
                });
                
                // Check if response is ok
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({ 
                        message: `Server error: ${response.status} ${response.statusText}` 
                    }));
                    throw new Error(errorData.error || errorData.message || `HTTP error! status: ${response.status}`);
                }
                
                // Parse response
                const data = await response.json();
                
                // Display result
                displayResult(data);
                
            } catch (error) {
                console.error('Error analyzing sentiment:', error);
                let errorMessage = 'Failed to connect to the backend. ';
                if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {
                    errorMessage += 'Please make sure the server is running on http://localhost:8080';
                } else {
                    errorMessage += error.message;
                }
                showError(errorMessage);
            } finally {
                // Hide loading state
                if (predictBtn) predictBtn.disabled = false;
                if (buttonLoader) buttonLoader.classList.remove('active');
            }
        }

        // ============================================
        // DISPLAY RESULT
        // ============================================

        function normalizeNumber(value) {
            if (typeof value === 'number' && !Number.isNaN(value)) {
                return value;
            }
            if (typeof value === 'string' && value.trim() !== '') {
                const parsed = Number(value);
                if (!Number.isNaN(parsed)) {
                    return parsed;
                }
            }
            return null;
        }

        function displayResult(data) {
            if (!resultBox || !resultIcon || !resultValue) {
                console.error('Result elements not found!');
                return;
            }

            const sentimentValue = (data.sentiment || '').toString().toLowerCase();
            const predictionValue = normalizeNumber(data.prediction);
            const positiveProb = normalizeNumber(data.positiveProbability);
            const negativeProb = normalizeNumber(data.negativeProbability);
            const explicitConfidence = normalizeNumber(data.confidence);

            let isPositive;
            if (sentimentValue === 'positive' || sentimentValue === 'pos' || sentimentValue === '1') {
                isPositive = true;
            } else if (sentimentValue === 'negative' || sentimentValue === 'neg' || sentimentValue === '0') {
                isPositive = false;
            } else if (predictionValue !== null) {
                isPositive = predictionValue === 1;
            } else if (positiveProb !== null && negativeProb !== null) {
                isPositive = positiveProb >= negativeProb;
            } else {
                console.warn('Unable to determine sentiment from response, defaulting to negative.', data);
                isPositive = false;
            }

            // Update result visuals
            resultBox.className = 'result-box ' + (isPositive ? 'positive' : 'negative');
            resultIcon.textContent = isPositive ? '‚úîÔ∏è' : '‚ùå';
            resultValue.textContent = isPositive ? 'Positive' : 'Negative';

            const resolvedConfidence = explicitConfidence ?? (isPositive ? positiveProb : negativeProb);
            if (resultConfidence) {
                if (resolvedConfidence !== null && !Number.isNaN(resolvedConfidence)) {
                    resultConfidence.textContent = `Confidence: ${(resolvedConfidence * 100).toFixed(2)}%`;
                    resultConfidence.style.display = 'block';
                } else {
                    resultConfidence.textContent = '';
                    resultConfidence.style.display = 'none';
                }
            }
            
            // Update analytics stats
            if (isPositive) {
                sentimentStats.positive++;
            } else {
                sentimentStats.negative++;
            }
            
            // Add confidence to history
            if (resolvedConfidence !== null && !Number.isNaN(resolvedConfidence)) {
                confidenceHistory.push(resolvedConfidence);
                // Keep only last 50 predictions for performance
                if (confidenceHistory.length > 50) {
                    confidenceHistory.shift();
                }
            }
            
            // Update charts (if analytics is loaded)
            if (typeof updateCharts === 'function') {
                updateCharts();
            }
            
            // Show result with animation
            if (resultContainer) {
                resultContainer.classList.add('active');
            }
            
            // Show suggested rating based on sentiment
            showSuggestedRating(isPositive);
            
            // Scroll to result if needed
            setTimeout(() => {
                if (resultContainer) {
                    resultContainer.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'nearest' 
                    });
                }
            }, 100);
        }

        // ============================================
        // ERROR HANDLING
        // ============================================

        function showError(message) {
            if (errorBox) {
                errorBox.textContent = `Error: ${message}`;
                errorBox.classList.add('active');
                
                // Scroll to error
                setTimeout(() => {
                    errorBox.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'nearest' 
                    });
                }, 100);
            }
        }

        function hideError() {
            if (errorBox) {
                errorBox.classList.remove('active');
            }
        }

        function hideResult() {
            if (resultContainer) {
                resultContainer.classList.remove('active');
            }
        }

        // ============================================
        // FORM SUBMISSION HANDLER
        // ============================================

        if (predictBtn) {
            predictBtn.addEventListener('click', (e) => {
                e.preventDefault();
                
                const reviewText = reviewInput ? reviewInput.value.trim() : '';
                
                // Validate input
                if (!reviewText) {
                    showError('Please enter a review or select a movie card above.');
                    return;
                }
                
                if (reviewText.length < 10) {
                    showError('Please enter a longer review (at least 10 characters).');
                    return;
                }
                
                // Analyze sentiment
                analyzeSentiment(reviewText);
            });
        }

        // Allow Enter key to submit (Ctrl+Enter or Cmd+Enter)
        if (reviewInput) {
            reviewInput.addEventListener('keydown', (e) => {
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    e.preventDefault();
                    if (predictBtn) predictBtn.click();
                }
            });
        }

        // ============================================
        // INITIALIZE APP
        // ============================================

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            try {
                initializeMovies();
                console.log('‚úÖ Movie Sentiment Analyzer Dashboard initialized');
            } catch (error) {
                console.error('‚ùå Error initializing app:', error);
            }
        });

        // Fallback initialization if DOMContentLoaded already fired
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeMovies);
        } else {
            initializeMovies();
        }
    </script>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Analytics Dashboard Script -->
    <script>
        // ============================================
        // ANALYTICS DASHBOARD - GLOBAL VARIABLES
        // ============================================

        let sentimentStats = {
            positive: 0,
            negative: 0,
            neutral: 0
        };

        let confidenceHistory = [];

        // Chart instances
        let sentimentPieChart = null;
        let confidenceLineChart = null;
        let wordsBarChart = null;

        // Static word counts for bar chart
        const positiveWordsCount = {
            "great": 12,
            "amazing": 7,
            "fantastic": 5,
            "excellent": 8,
            "wonderful": 6,
            "brilliant": 4,
            "outstanding": 5,
            "perfect": 9
        };

        const negativeWordsCount = {
            "boring": 9,
            "worst": 6,
            "terrible": 4,
            "awful": 5,
            "disappointing": 7,
            "bad": 8,
            "poor": 5,
            "waste": 4
        };

        // ============================================
        // INITIALIZE ANALYTICS CHARTS
        // ============================================

        function initAnalyticsCharts() {
            // Wait for Chart.js to load
            if (typeof Chart === 'undefined') {
                console.warn('Chart.js not loaded yet, retrying...');
                setTimeout(initAnalyticsCharts, 100);
                return;
            }

            const pieCtx = document.getElementById('sentimentPieChart');
            const lineCtx = document.getElementById('confidenceLineChart');
            const barCtx = document.getElementById('wordsBarChart');

            // Initialize Pie Chart
            if (pieCtx) {
                sentimentPieChart = new Chart(pieCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Positive', 'Negative', 'Neutral'],
                        datasets: [{
                            data: [sentimentStats.positive, sentimentStats.negative, sentimentStats.neutral],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(239, 68, 68, 0.8)',
                                'rgba(156, 163, 175, 0.8)'
                            ],
                            borderColor: [
                                'rgba(34, 197, 94, 1)',
                                'rgba(239, 68, 68, 1)',
                                'rgba(156, 163, 175, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    font: {
                                        size: 12,
                                        weight: '500'
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.parsed || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = total > 0 ? ((value / total) * 100).toFixed(1) : 0;
                                        return `${label}: ${value} (${percentage}%)`;
                                    }
                                }
                            }
                        },
                        animation: {
                            animateRotate: true,
                            duration: 1000
                        }
                    }
                });
            }

            // Initialize Line Chart
            if (lineCtx) {
                confidenceLineChart = new Chart(lineCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Confidence',
                            data: [],
                            borderColor: 'rgba(106, 17, 203, 1)',
                            backgroundColor: 'rgba(106, 17, 203, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6,
                            pointBackgroundColor: 'rgba(106, 17, 203, 1)',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 1,
                                ticks: {
                                    stepSize: 0.2,
                                    callback: function(value) {
                                        return (value * 100).toFixed(0) + '%';
                                    }
                                },
                                grid: {
                                    color: 'rgba(0, 0, 0, 0.05)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const value = context.parsed.y || 0;
                                        return `Confidence: ${(value * 100).toFixed(2)}%`;
                                    }
                                }
                            }
                        },
                        animation: {
                            duration: 750
                        }
                    }
                });
            }

            // Initialize Bar Chart
            if (barCtx) {
                const positiveWords = Object.keys(positiveWordsCount);
                const negativeWords = Object.keys(negativeWordsCount);
                const allWords = [...positiveWords, ...negativeWords];
                const positiveData = positiveWords.map(word => positiveWordsCount[word]);
                const negativeData = negativeWords.map(word => negativeWordsCount[word]);

                wordsBarChart = new Chart(barCtx, {
                    type: 'bar',
                    data: {
                        labels: allWords,
                        datasets: [
                            {
                                label: 'Positive Words',
                                data: [...positiveData, ...new Array(negativeWords.length).fill(0)],
                                backgroundColor: 'rgba(34, 197, 94, 0.7)',
                                borderColor: 'rgba(34, 197, 94, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Negative Words',
                                data: [...new Array(positiveWords.length).fill(0), ...negativeData],
                                backgroundColor: 'rgba(239, 68, 68, 0.7)',
                                borderColor: 'rgba(239, 68, 68, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    stepSize: 2
                                },
                                grid: {
                                    color: 'rgba(0, 0, 0, 0.05)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    font: {
                                        size: 10
                                    },
                                    maxRotation: 45,
                                    minRotation: 45
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    padding: 15,
                                    font: {
                                        size: 12,
                                        weight: '500'
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.parsed.y}`;
                                    }
                                }
                            }
                        },
                        animation: {
                            duration: 1000
                        }
                    }
                });
            }
        }

        // ============================================
        // UPDATE CHARTS WITH NEW DATA
        // ============================================

        function updateCharts() {
            // Update Pie Chart
            if (sentimentPieChart) {
                sentimentPieChart.data.datasets[0].data = [
                    sentimentStats.positive,
                    sentimentStats.negative,
                    sentimentStats.neutral
                ];
                sentimentPieChart.update('active');
            }

            // Update Line Chart
            if (confidenceLineChart && confidenceHistory.length > 0) {
                const labels = confidenceHistory.map((_, index) => `#${index + 1}`);
                confidenceLineChart.data.labels = labels;
                confidenceLineChart.data.datasets[0].data = confidenceHistory;
                confidenceLineChart.update('active');
            }
        }

        // Initialize charts when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                setTimeout(initAnalyticsCharts, 100);
            });
        } else {
            setTimeout(initAnalyticsCharts, 100);
        }
    </script>
</body>
</html>


